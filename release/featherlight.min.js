/**
 * Featherlight - ultra slim jQuery lightbox
 * Version 0.3.1 - http://noelboss.github.io/featherlight/
 *
 * Copyright 2014, NoÃ«l Raoul Bossart (http://www.noelboss.com)
 * MIT Licensed.
**/
!function(a){"use strict";if("undefined"==typeof a)return void("console"in window&&window.console.info("Too much lightness, Featherlight needs jQuery."));var b={id:0,defaults:{autostart:!0,namespace:"featherlight",selector:"[data-featherlight]",context:"body",type:{image:!1,ajax:!1},targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",beforeOpen:null,beforeClose:null,afterOpen:null,afterClose:null,contentFilters:["jquery","image","html","ajax"],open:function(b){var c=!0;"function"==typeof this.config.beforeOpen&&(c=this.config.beforeOpen.call(this,b)),!1!==c&&(c=a.featherlight.methods.open.call(this,b)),!1!==c&&"function"==typeof this.config.afterOpen&&this.config.afterOpen.call(this,b)},close:function(b){var c=!0;"function"==typeof this.config.beforeClose&&(c=this.config.beforeClose.call(this,b)),!1!==c&&a.featherlight.methods.close.call(this,b),!1!==c&&"string"===this.config.afterClose&&this.config.afterClose.call(this,b)}},methods:{setup:function(c,d){"object"!=typeof c||c instanceof a!=!1||d||(d=c,c=void 0),d=a.extend({},b.defaults,d);var e=a(this)||a(),f=e.attr("data-"+d.namespace+"-variant")||d.variant,g=d.resetCss?d.namespace+"-reset":d.namespace,h=a(d.background||'<div class="'+g+'"><div class="'+g+'-content"><span class="'+g+"-close-icon "+d.namespace+'-close">'+d.closeIcon+"</span></div></div>"),i={id:b.id++,config:d,target:c,$elm:e,$instance:h.clone().addClass(f)};i.$instance.on(d.closeTrigger+"."+d.namespace,function(b){var c=a(b.target);("background"===d.closeOnClick&&c.is("."+d.namespace)||"anywhere"===d.closeOnClick||c.is("."+d.namespace+"-close"))&&(b.preventDefault(),d.close.call(i))}),i.config.closeOnEsc&&a(document).bind("keyup."+i.config.namespace+i.id,function(a){27===a.keyCode&&i.$instance.find("."+i.config.namespace+"-close:first").click()}),0<e.length&&this.tagName?e.on(d.openTrigger+"."+d.namespace,a.proxy(d.open,i)):d.open.call(i)},getContent:function(){var b,c=this,d=c.target||c.$elm.attr(c.config.targetAttr)||"";for(var e in c.config.type)c.config.type[e]===!0&&(b=a.featherlight.contentFilters[e]);if(!b&&d in a.featherlight.contentFilters&&(b=a.featherlight.contentFilters[d],d=c.target&&c.$elm.attr(c.config.targetAttr)),d=d||c.$elm.attr("href")||"",!b){var f=d;if(d=null,a.each(c.config.contentFilters,function(){return b=a.featherlight.contentFilters[this],b.test&&(d=b.test(f)),!d&&b.regex&&f.match&&f.match(b.regex)&&(d=f),!d}),!d)return console.error("Featherlight: no content filter found "+(f?' for "'+f+'"':" (no target specified)")),!1}return b.process.call(c,d)},setContent:function(b){var c=this;(b.is("iframe")||a("iframe",b).length>0)&&c.$instance.addClass(c.config.namespace+"-iframe"),c.$content=b.clone().addClass(c.config.namespace+"-inner"),c.$instance.find("."+c.config.namespace+"-inner").remove(),c.$instance.find("."+c.config.namespace+"-content").append(c.$content)},open:function(a){a&&a.preventDefault();var c=this,d=b.methods.getContent.call(c);return d?(b.methods.setContent.call(c,d),void c.$instance.appendTo("body").fadeIn(c.config.openSpeed)):!1},close:function(){var b=this;b.config.closeOnEsc&&a(document).unbind("keyup."+b.config.namespace+b.id),b.$instance.fadeOut(b.config.closeSpeed,function(){b.$instance.detach()})}},contentFilters:{jquery:{regex:/^[#.]\w/,test:function(b){return b instanceof a&&b},process:function(b){return a(b)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp)(\?\S*)?$/i,process:function(b){return a('<img src="'+b+'" alt="" class="'+this.config.namespace+'-image" />')}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(b){return a(b)}},ajax:{regex:/./,process:function(b){var c=a("<div></div>").load(b,function(b,d){"error"!==d&&a.featherlight(c.html(),a.extend(self.config,{type:{html:!0}}))})}}}};a.featherlight=function(c,d){"string"!=typeof c&&!1==c instanceof a?(d="object"==typeof c?a.extend({},b.defaults,c):b.defaults,a(d.selector,d.context).featherlight()):b.methods.setup.call(null,c,d)},a.fn.featherlight=function(a,c){return this.each(function(){b.methods.setup.call(this,c,a)}),this},a.extend(a.featherlight,b),a(document).ready(function(){var b=a.featherlight.defaults;b.autostart&&a(b.selector,b.context).featherlight()})}(jQuery);